<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-linux/linux-concept-grub">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">GRUB Bootloader | selubi.tech</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://notes.selubi.tech/img/social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://notes.selubi.tech/img/social-card.jpg"><meta data-rh="true" property="og:url" content="https://notes.selubi.tech/linux/linux-concept-grub"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="GRUB Bootloader | selubi.tech"><meta data-rh="true" name="description" content="One of the primary sources of this document is the LPIC-1 Exam 101 Learning Material: 102.2."><meta data-rh="true" property="og:description" content="One of the primary sources of this document is the LPIC-1 Exam 101 Learning Material: 102.2."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://notes.selubi.tech/linux/linux-concept-grub"><link data-rh="true" rel="alternate" href="https://notes.selubi.tech/linux/linux-concept-grub" hreflang="en"><link data-rh="true" rel="alternate" href="https://notes.selubi.tech/linux/linux-concept-grub" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.09e1162a.css">
<link rel="preload" href="/assets/js/runtime~main.565dee17.js" as="script">
<link rel="preload" href="/assets/js/main.9b059526.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.selubi.tech/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logo-light.png" alt="selubi.tech logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-dark.png" alt="selubi.tech logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Notes</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Selubi/selubi.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">About</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/github">GitHub</a><button aria-label="Toggle the collapsible sidebar category &#x27;GitHub&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/category/linux">Linux</a><button aria-label="Toggle the collapsible sidebar category &#x27;Linux&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/linux/linux-cheat-sheet">Cheat Sheet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/linux/linux-concept-bios">BIOS and UEFI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/linux/linux-concept-grub">GRUB Bootloader</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/linux/linux-concept-service">Service Manager</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/setup">Setup</a><button aria-label="Toggle the collapsible sidebar category &#x27;Setup&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/category/linux"><span itemprop="name">Linux</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">GRUB Bootloader</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>GRUB Bootloader</h1></header><p>One of the primary sources of this document is the <a href="https://learning.lpi.org/en/learning-materials/learning-materials/" target="_blank" rel="noopener noreferrer">LPIC-1 Exam 101 Learning Material: 102.2</a>.
However, particularly for this topic, plenty of scattered information across the internet is used as the source.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-it">What is it?<a href="#what-is-it" class="hash-link" aria-label="Direct link to What is it?" title="Direct link to What is it?">​</a></h2><p>A bootloader is the first software that runs after the computer is powered on. It is executed by the system firmware (UEFI/BIOS), whose primary responsibility is identifying and loading the operating system kernel and passing control to it.</p><p>The bootloader screen is typically skipped if the system only has one OS. If you ever saw a list of operating systems to boot from, that screen is the bootloader.</p><p>When you install a Linux distribution, it usually comes with a bootloader called <a href="https://www.gnu.org/software/grub/" target="_blank" rel="noopener noreferrer">GRUB (GRand Unified Bootloader)</a>.</p><p>When we refer to GRUB, we usually refer to GRUB 2, which replaced the original GRUB (now called GRUB Legacy).</p><p>In UEFI systems, GRUB is installed in an ESP (EFI System Partition) as an EFI Application. If the system has multiple GRUB, which may happen when you install multiple OSes, it will show as separate entries in the UEFI bootloader configuration.</p><p>In BIOS systems, GRUB is installed in the MBR (Master Boot Record). <a href="/linux/linux-concept-bios#bios-difference-to-uefi">BIOS only executes the MBR of the first disk</a>, so other MBRs (in different disks) are ignored even if it exists.</p><p>A single GRUB can handle the boot of multiple operating systems when appropriately configured.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-grub">Configuring GRUB<a href="#configuring-grub" class="hash-link" aria-label="Direct link to Configuring GRUB" title="Direct link to Configuring GRUB">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="location-of-grub-and-its-config-files">Location of GRUB and its config files<a href="#location-of-grub-and-its-config-files" class="hash-link" aria-label="Direct link to Location of GRUB and its config files" title="Direct link to Location of GRUB and its config files">​</a></h3><p>In UEFI based system, GRUB is loaded from the file <code>grubx64.efi</code> or <code>grubia32.efi</code> for 64-bit and 32-bit systems, respectively, from the ESP. Linux distributions often mount the contents of the ESP at <code>/boot/efi</code> or <code>/efi</code> (the exact location depends on the distribution).</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>After you reach the Operating System, <code>/boot/efi</code> does not impact the current session. The purpose of mounting it is to configure it for the sessions after.</p></div></div><p>The location of the GRUB config file is a topic that is confusing to find a definite answer on. First, GRUB reads the configuration from a file called <code>grub.cfg</code>.</p><p>In BIOS based machine, the <code>grub.cfg</code> is located on <code>/boot/grub</code>. Here, GRUB (located in MBR) is configured to look for the config files in the pre-specified partition. A reminder that <a href="https://superuser.com/questions/368173/what-is-the-maximum-number-of-partitions-that-can-be-made-on-a-hard-drive" target="_blank" rel="noopener noreferrer">BIOS and UEFI partition works differently</a>.</p><p><code>grub.cfg</code> may be stored in ESP with GRUB itself in UEFI systems, but this is not always true. In many cases, to maintain compatibility with BIOS, it is located in <code>/boot/grub</code>, which is the mount location of the boot partition. If there is no boot partition, <code>/boot/grub</code> (and consequently <code>grub.cfg</code>) is located on the root partition.</p><p>RHEL (Red Hat Enterprise Linux) used to put <code>grub.cfg</code> in the ESP for UEFI based machine and <code>/boot/grub</code> on others, but <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/9.0_release_notes/index#enhancement_boot-loader" target="_blank" rel="noopener noreferrer">RHEL 9 changes this location to <code>/boot/grub</code> uniformly</a>.</p><p>GRUB checks the <a href="https://www.gnu.org/software/grub/manual/grub/html_node/prefix.html" target="_blank" rel="noopener noreferrer"><code>$prefix</code> variable</a> for the <code>grub.cfg</code> location. This is set during the installation of GRUB.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The <code>$prefix</code> variable is for the GRUB command line, not the Linux one.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-grub-1">Configuring GRUB<a href="#configuring-grub-1" class="hash-link" aria-label="Direct link to Configuring GRUB" title="Direct link to Configuring GRUB">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-behavior-of-grub-itself">Configuring the behavior of GRUB itself<a href="#configuring-the-behavior-of-grub-itself" class="hash-link" aria-label="Direct link to Configuring the behavior of GRUB itself" title="Direct link to Configuring the behavior of GRUB itself">​</a></h4><p>In this section, GRUB configuration files are assumed to be located at <code>/boot/grub/grub.cfg</code></p><p>It is not recommended to change the contents of <code>grub.cfg</code> directly. Instead, we can edit <code>/etc/default/grub</code> and <code>/etc/grub.d/</code> and run the <code>update-grub</code> command.</p><p><code>update-grub</code> is a shortcut to <code>grub-mkconfig -o /boot/grub/grub.cfg</code> or something equivalent.</p><p><code>/etc/default/grub</code> contains parameters to configure the grub behavior itself. Below is an example <code>/etc/default/grub</code>.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/default/grub</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Default GRUB configuration file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Set the default boot entry. (e.g. &#x27;0&#x27; for the first entry)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">GRUB_DEFAULT</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Uncomment and set to &#x27;true&#x27; to enable GRUB to remember the last boot choice</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">GRUB_SAVEDEFAULT</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Set the timeout in seconds for GRUB menu to automatically boot the default entry. -1 for no time limit.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">GRUB_TIMEOUT</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Additional kernel command-line parameters for all Linux entries (including recovery)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">GRUB_CMDLINE_LINUX</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Additional kernel command-line parameters for the default Linux entry (excluding recovery)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;quiet splash&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Enable GRUB to unlock encrypted disks at boot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">GRUB_ENABLE_CRYPTODISK</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;y&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>By default, two menu entries are generated for each Linux kernel, one with the default options and one entry for recovery. <code>GRUB_CMDLINE_LINUX</code> modifies the recovery entries while <code>GRUB_CMDLINE_LINUX_DEFAULT</code> does not.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-grub-menu-entries">Configuring GRUB Menu Entries<a href="#configuring-grub-menu-entries" class="hash-link" aria-label="Direct link to Configuring GRUB Menu Entries" title="Direct link to Configuring GRUB Menu Entries">​</a></h4><p>By default, <code>update-grub</code> will detect kernels and OSes present on the machine and generate the entries automatically. New entries could also be added manually to the <code>/etc/grub.d/</code>.</p><p><code>/etc/grub.d/</code> contains scripts that are to be executed in numerical order. Scripts in this directory should be executable. The naming convention of scripts contained here depends on each distribution.</p><p>Usually, we can add a menu entry to the <code>/etc/grub.d/40_custom</code> file. An example menu entry is shown below.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">menuentry &quot;Default OS&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    set root=(hd0,1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    linux /vmlinuz root=/dev/sda1 ro quiet splash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    initrd /initrd.img</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>set root=(hd0,1)</code> - Sets device and partition of the root folder of OS. <code>hd0</code>,<code>hd1</code>,... corresponds to <code>/dev/sda</code>,<code>dev/sdb</code>,... in linux. Partition numbering starts at 1. So, this configuration in particular equates to <code>/dev/sda1</code></li><li><code>/vmlinuz</code> - Location of Linux kernel. Because the kernel is located directly inside the root folder, we can assume that this configuration has a separate boot partition, and it is not located at <code>/dev/sda1</code> <code>(hd0,1)</code>. If there is no boot partition and the boot folder is located within the root partition, something like <code>/boot/vmlinuz</code> will instead be shown instead.</li></ul><p>Instead of directly specifying the device and partition, GRUB 2 can also search for a file system with a specific UUID (Universally Unique Identifier). In that case, we can replace <code>set root=(hd0,1)</code> with the configuration below.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">search --set</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">root --fs-uuid </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">UUID</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="extra-notes">Extra Notes<a href="#extra-notes" class="hash-link" aria-label="Direct link to Extra Notes" title="Direct link to Extra Notes">​</a></h2><p>The information regarding bootloaders is all over the place. For example, below are some questions that might get different answers.</p><ul><li>If we install GRUB via RHEL installation and Ubuntu after that, will Ubuntu&#x27;s installation wizard GRUB create a different ESP or modify the existing one?</li><li>Where is the exact location of <code>grub.cfg</code> for <code>X</code> distro?</li><li>What are the exact contents of the <code>ESP</code>?</li><li>How does the Windows bootloader play with GRUB?</li></ul><p>To get definite answers to these, we need to do experimentation. Always do a backup before messing with GRUB, as a wrong configuration can easily break things.</p><p>Last updated: July 21, 2023</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/linux">Linux</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Selubi/selubi.github.io/tree/main/docs/linux/grub.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/linux/linux-concept-bios"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">BIOS and UEFI</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/linux/linux-concept-service"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Service Manager</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-it" class="table-of-contents__link toc-highlight">What is it?</a></li><li><a href="#configuring-grub" class="table-of-contents__link toc-highlight">Configuring GRUB</a><ul><li><a href="#location-of-grub-and-its-config-files" class="table-of-contents__link toc-highlight">Location of GRUB and its config files</a></li><li><a href="#configuring-grub-1" class="table-of-contents__link toc-highlight">Configuring GRUB</a></li></ul></li><li><a href="#extra-notes" class="table-of-contents__link toc-highlight">Extra Notes</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://github.com/Selubi" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="https://www.linkedin.com/in/selubi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="mailto:contact@selubi.tech" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email: contact@selubi.tech<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">May the information provided on this site make your day easier.
        <br> Copyright © 2023 Gregorius Bryan.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.565dee17.js"></script>
<script src="/assets/js/main.9b059526.js"></script>
</body>
</html>